# Плагин для генерации Fake-компонентов
## Как работает
1. Alt + Enter -> Generate fake component
2. Сгенерировать фейк-компонент можно (т.е. появляется подсказка) при следующих условиях:
    * класс, на который применяется плагин - интерфейс
    * его имя содержит в себе строку `"Component"` (см. `fakes.Config.isComponent` для изменения логики)
    * интерфейс - верхнеуровневая сущность в файле (т.е. он не вложен ни в какую другую)
3. Далее генерируется класс-наследник интерфейса, в котором переопределяются поля и методы, у которых нет стандартной реализации в интерфейсе. Если тип содержит в себе generic-и, то возможна их отдельная обработка, если такая логика содержится в объявляющем их правиле. Например, по умолчанию `StateFlow<StateFlow<Int>>` превратится в `MutableStateFlow(MutableStateFlow(0))`. А вот `List<Int>` превратится в `listOf()`. Конечно, всё это можно изменить.
## Какие типы поддерживает
По умолчанию идёт поддержка примитивов, `StateFlow`, `LoadableState`, `PagedState`, `InputControl`, `CheckControl`, `StandardDialogControl`-а, некоторых коллекций и вложенных компонентов
## Ограничения
1. liveplugin на данный момент не работает с kotlin 2.0.0, так что как минимум на Android Studio Ladybug, плагин работать не будет
2. Т.к. плагин содержит в себе внушительное количество логики, её пришлось разбить на файлы. Однако, пока что адекватной поддержке code completion для нескольких файлов нет. Вот [issue](https://github.com/dkandalov/live-plugin/issues/105)
3. Не рекомендуется использование typealias-ов как прямых, так и при импорте. Вообще может работать и с ними, но это корнер кейс, пока что полной поддержки он не получил
4. Плагин может плохо работать в случаях, когда package не объявлен (в обычном проекте package всегда есть и содержит хотя бы 3 родителя, так что это тоже такой корнер кейс)
## Кастомизация
Предполагается, что разработчик сможет писать сам свои правила или модифицировать существующие. Для сих целей предлагается краткий обзор api:

### Основы
В `fakes.Config` есть поле `providers` со списком правил. Правила проверяются последовательно сверху вниз. В `fakes.codegen.api.rules` можно найти некоторые существующие функции для их определения. На основе уже существующих правил можно понять принцип их работы, а также некоторые распространенные кейсы.

Более детальное описание api coming soon

## Установка
1. Прежде всего, нужно установить liveplugin
2. Затем переключиться в `Project view`
3. В Scratches and Consoles должна появиться папочка Live plugins
4. Скопируйте туда папку `.live-plugins/fake-component`
5. В списке liveplugin-а (скорее всего, его вкладка где-то справа) появится плагин fake-component, его нужно выделить и запустить по стрелочке
6. Пользуйтесь